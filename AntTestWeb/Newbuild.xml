<?xml version="1.0" encoding="euc-kr"?>
<project name="kuis" default="war" basedir="C:\warsample"> <!-- war생성폴더-->
	<!-- 프로퍼티를 지정 합니다. -->
	<!-- <property file="build.properties"/> 프로퍼티파일있을때만-->
	<property name="name" value="kuis"/>
	<!-- 프로젝트이름 -->
	<property name="version" value="1.0"/>
	<property name="base.dir"  value="."/>
	<!-- 소스 워크스페이스 -->
	<property name="workspacePath" location="C:\Users\Real_PHS\Downloads\kuisdev">
	</property>
	<!-- 톰캣라이브러리폴더 -->
	<property name="tomcatLib.dir"  value="F:\Tomcat 6.0\lib"/>
	<property name="dist.dir"  value="dist"/>
	<property name="build.dir" value="build"/>
	<property name="lib.dir" value="lib"/>
	<property name="classes.dir" value="classes"/>
	<property name="src.dir"   value="src"/>
	<property name="jar.file"  value="${build.dir}/${name}.jar"/>
	<property name="dist.file"  value="${dist.dir}/${name}-${version}.zip"/>
	<!-- ex::  workspace/projectName/WebContent -->
	<property name="webbase.dir"  value="${workspacePath}/${name}/WebContent"/>
	<!-- 삭제 -->
	<target name="clear">
		<delete dir="$[build.dir}" />
		<delete dir="${name}.war" />
	</target>

	<!-- 이미있는건지우고 진행 -->
	<target name="compile" depends="clear">
		<tstamp>
			<format property="DSTAMP" pattern="yyyy.MM.dd" />
			<format property="TSTAMP" pattern="HH:mm" />
		</tstamp>
		<!-- ex)[echo] Build Start!! ======> 2013.05.07 14:52 -->
		<echo message="Build Start!! ======> ${DSTAMP} ${TSTAMP}" />

		<!-- 소스 컴파일 -->
		<!-- 배포할 dist 디렉토리 생성 -->

		<echo message="compile"/>
		<mkdir dir="${build.dir}"/>
		<javac encoding="UTF-8" srcdir="${workspacePath}/${name}/${src.dir}" destdir="${build.dir}" fork="yes" memorymaximumsize="256m"   >
			<classpath>
				<pathelement path="${workspacePath}/${name}" />
				<fileset dir="${webbase.dir}/WEB-INF/lib">
					<include name="*.jar" />
				</fileset>
				<fileset dir="${tomcatLib.dir}">
					<include name="*.jar" />
				</fileset>
			</classpath>
		</javac>
		<copy todir="${build.dir}">
		    <fileset dir="${workspacePath}/${name}/src/java"
	             includes="**/*.*" />
			<fileset dir="${workspacePath}/${name}/sqls"
				             includes="**/*.*" />
			<fileset dir="${workspacePath}/${name}/modules"
				             includes="**/*.*" />
			<fileset dir="${workspacePath}/${name}/src/resources"
				             includes="**/*.*" />
		</copy>
		<echo message="copyend"/>
		<!-- 빌드 디렉토리에 컴파일이 끝난 클래스를 jar 파일로 묶음 -->
		<!-- destfile은 생성될 JAR 파일/ basedir은 jar로 압축될 파일이 있는 폴더 -->
	</target>

	<target name="war" depends="compile" description="애플리케이션을 WAR파일로 export 합니다.">
		<!-- ${name}.war의 이름으로 배포하며 $web.dir의 web.xml을 참조합니다. -->
		<war destfile="${name}.war" webxml="${webbase.dir}/WEB-INF/web.xml">
			<!-- ${webbase.dir}의 모든 파일을 war의 대상으로 간주 합니다. -->
			<fileset dir="${webbase.dir}">
				<include name="**/*.*" />
			</fileset>
			<!-- WEB-INF/classes 밑에 컴파일된 class(bulid폴더)-->
			<classes dir="${build.dir}"/>
		</war>
	</target>

	<!-- 배포할 라이브러리와 소스등을 배포용 디렉토리로 복사하고 배포용 디렉토리를 zip으로 묶음 
	  jar와 소스, lib 아래의 jar를 배포용 디렉토리에 복사 후 zip으로 묶음
	<target name="Build" depends="mkjar">
		<echo message="dist!!!!!!!!!!!!!" />
		<copy todir="${dist.dir}/lib">
			<fileset dir="lib" />
		</copy>
		<copy todir="${dist.dir}/dist">
			<fileset dir="dist" />
		</copy>
		<zip destfile="zip-${dist.file}">
			<fileset dir="${dist}/.." />
		</zip>
	</target>
	 -->
	<!-- 스크립트의 끝 -->
</project>