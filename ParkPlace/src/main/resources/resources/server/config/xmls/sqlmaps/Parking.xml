<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="parking">
	<typeAlias alias="parking" type="co.kr.parkprice.model.Parking" />

	<select id="getParking" resultClass="parking">
		SELECT   p_idx
				,p_type
				,p_name
				,p_latitude
				,p_longitude
				,p_address
				,p_time
				,p_pricetable
				,p_price1
				,p_per1
				,p_price2
				,p_per2
				,p_etc
				,p_state
				,p_lastupdate
				,p_registdate
				,p_comment
				,p_commentId
				,p_image1
				,p_image2
				,p_image3
				,p_count
				,(select count(*) from pk_parking) as totalCnt
		  FROM pk_parking
	  ORDER BY p_idx desc 
		 LIMIT #pageNo# , 20
	</select>
	
	<insert id="insertParking">
		INSERT INTO pk_parking
		(
		 p_idx
		,p_type
		,p_name
		,p_latitude
		,p_longitude
		,p_address
		,p_time
		,p_pricetable
		,p_price1
		,p_per1
		,p_price2
		,p_per2
		,p_etc
		,p_state
		,p_lastupdate
		,p_registdate
		,p_comment
		,p_commentId
		,p_image1
		,p_image2
		,p_image3
		,p_count
		)
		VALUES(
		 #p_idx#
		,#p_type#
		,#p_name#
		,#p_latitude#
		,#p_longitude#
		,#p_address#
		,#p_time#
		,#p_pricetable#
		,#p_price1#
		,#p_per1#
		,#p_price2#
		,#p_per2#
		,#p_etc#
		,#p_state#
		,#p_lastupdate#
		,#p_registdate#
		,#p_comment#
		,#p_commentId#
		,#p_image1#
		,#p_image2#
		,#p_image3#
		,#p_count#
		)
	</insert>
	
	<delete id="deleteParking">
		DELETE FROM pk_parking WHERE p_idx = #p_idx#
	</delete>
	 
</sqlMap>